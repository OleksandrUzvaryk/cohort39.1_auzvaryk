# Lesson 05

# Тип данных String

## Введение в Строки (String) в Java

### Определение Строки и ее Представление в Java

Строка в Java — это последовательность символов и представлена классом `String`. В отличие от многих языков
программирования, где строки могут быть представлены как массивы символов, в Java строки являются объектами, которые
предоставляют множество методов для работы с текстовыми данными.

### Различие между Строками (String) и Символьными Массивами (char[])

- **Строка (`String`)**: Неизменяемый (immutable) объект. Это означает, что после создания строки ее содержимое в _heap_
  не может быть изменено, можно лишь создать новый объек в _heap_ и ссылаться на него.
- **Символьный массив (`char[]`)**: Изменяемый массив символов. Используется, когда необходимо изменить содержимое
  строки (не используется на практике, тк проще менять ссылку).

## Создание Строк

### Создание Строк с Использованием Литералов

Строки можно создавать непосредственно, используя литералы:

```java
String greeting="Привет, мир!";
```

## Pool String (пул строк)

Когда строка создается через литерал, она автоматически помещается в пул строк. Если другая строка с таким же значением
уже существует в пуле, то новая строка не создается, а вместо этого используется ссылка на существующую строку из пула.
Это повышает эффективность памяти и скорость доступа к строкам.

```java
String hello="hello, world!";
```

При создании строки через `new String()`, каждый раз создается новый объект, даже если такая строка уже существует в
пуле
строк:

```java
String stringObject=new String("This is a new String object");
```

Строки являются ключевым компонентом в программировании на Java, и понимание различных способов их создания и хранения
помогает в написании более эффективного и оптимизированного кода.

## 3. Неизменяемость Строк в Java

### Основы Неизменяемости Строк

В Java строки представлены классом `String`, который является неизменяемым (immutable). Это значит, что сам объект
строки в куче не может быть изменен после его создания.

#### Что Именно Не Изменяется?

- Когда мы говорим, что строка неизменяема, мы имеем в виду, что последовательность символов, хранящаяся в
  объекте `String`, не может быть изменена.
- Например, если у вас есть строка `String str = "Hello";`, то нельзя изменить один из символов этой строки на другой.

#### Изменение Значения Переменной

- Хотя объект строки не может быть изменен, переменная, ссылающаяся на строку, может быть изменена для указания на
  другой объект строки.
- Например, можно переназначить переменную `str` на новую строку: `str = "World";`. При этом создается новый объект
  строки в памяти, и переменная `str` теперь ссылается на этот новый объект.

### Примеры и Последствия Неизменяемости

#### Примеры Неизменяемости

```java
String s1="Java";
        s1.toUpperCase(); // Это не изменит строку s1
        System.out.println(s1); // Выведет "Java"

        s1=s1.toUpperCase(); // Создает новую строку "JAVA"
        System.out.println(s1); // Выведет "JAVA"
```

- В первом примере вызов `toUpperCase()` не изменяет исходную строку `s1`. Вместо этого он создает новую строку,
  которую можно присвоить другой переменной.

Последствия для Производительности

- Поскольку каждая операция создает новый объект строки, это может привести к избыточному использованию памяти и
  снижению производительности при частой модификации строк.
- Для эффективной работы со строками, которые необходимо часто изменять, следует использовать классы `StringBuilder` или
  `StringBuffer`.

<details style="margin-left: 20px;">
<summary><strong><em> Аналогия: (нажмите на треугольник, чтобы развернуть текст)</em></strong></summary>

### Аналогия с Написанным Письмом

Представьте, что строка в `Java` подобна написанному и отправленному письму. Как только вы написали письмо, положили его
в
конверт, заклеили и отправили, вы больше не можете изменить его содержимое. Если вам нужно что-то исправить или
добавить, единственный вариант — написать новое письмо.

#### Неизменяемость Содержимого

Как только строка создана (письмо написано), ее содержимое не может быть изменено. Если в строке есть ошибка или нужно
что-то добавить, нужно создать новую строку (написать новое письмо).

#### Изменение Ссылки на Строку

Переменная, которая хранит ссылку на строку, аналогична адресу, на который вы отправляете письмо. Вы можете изменить
адрес (переменную), чтобы он указывал на другое письмо (другую строку), но содержимое исходного письма (исходной строки)
останется прежним.

#### Последствия для Производительности

Если вам нужно много раз вносить изменения в письмо (строку), каждый раз придется писать новое письмо (создавать новую
строку). Это может быть неэффективно, особенно если изменения маленькие, но частые.

#### Практическое Применение

В случаях, когда вам нужно часто вносить изменения (например, добавлять строки к тексту), вместо использования
неизменяемых строк (писем) лучше использовать `StringBuilder` или `StringBuffer` — это как вести записи в блокноте, где
вы
можете добавлять и изменять текст по мере необходимости.

</details>

## 4. Работа со Строками в Java

### Методы класса String

#### 1. `length()`

Возвращает длину строки.

```java
String str="Hello";
        int length=str.length();
```

#### 2. `charAt(int index)`

Возвращает символ по указанному индексу.

```java
char ch=str.charAt(1); // 'e'
```

#### 3. `substring(int beginIndex, int endIndex)`

Возвращает подстроку от `beginIndex` до `endIndex`.

```java
String substr=str.substring(1,3); // "el"
```

#### 4. `indexOf(String s)`

Возвращает индекс первого вхождения указанной подстроки.

```
int index = str.indexOf("l"); // 2
```

#### 5. `toLowerCase()`

Преобразует все символы строки в нижний регистр.

```java
String lowerStr=str.toLowerCase(); // "hello"
```

#### 6. `toUpperCase()`

Преобразует все символы строки в верхний регистр.

```java
String upperStr=str.toUpperCase(); // "HELLO"
```

#### 7. `trim()`

Удаляет начальные и конечные пробелы.

```java
String trimmedStr="  Hello World  ".trim(); // "Hello World"
```

### Объединение строк

#### Конкатенация строк

Строки можно объединять (конкатенировать) разными способами:

- **Использование оператора `+`**

```java  
  String s1 = "Hello";
  String s2 = "World";
  String s3 = s1 + " " + s2; // "Hello World"
```  

- **Метод `concat()`**

```java  
  String s4 = s1.concat(" ").concat(s2); // "Hello World"
  ```

Конкатенация строк особенно полезна при соединении нескольких строк в одну. Однако стоит помнить, что из-за
неизменяемости строк каждая операция конкатенации создает новую строку, что может повлиять на производительность при
большом количестве операций.


<details style="margin-left: 20px;">
<summary><strong><em> Пример кода: (нажмите на треугольник, чтобы развернуть текст)</em></strong></summary>

```java
public class StringExamples {

    public static void main(String[] args) {
        // Пример использования метода length()
        String str = "Hello";
        int length = str.length();
        System.out.println("Длина строки: " + length);

        // Пример использования метода charAt()
        char ch = str.charAt(1); // 'e'
        System.out.println("Символ на позиции 1: " + ch);

        // Пример использования метода substring()
        String substr = str.substring(1, 3); // "el"
        System.out.println("Подстрока от 1 до 3: " + substr);

        // Пример использования метода indexOf()
        int index = str.indexOf("l"); // 2
        System.out.println("Индекс первого вхождения 'l': " + index);

        // Пример использования метода toLowerCase()
        String lowerStr = str.toLowerCase(); // "hello"
        System.out.println("Строка в нижнем регистре: " + lowerStr);

        // Пример использования метода toUpperCase()
        String upperStr = str.toUpperCase(); // "HELLO"
        System.out.println("Строка в верхнем регистре: " + upperStr);

        // Пример использования метода trim()
        String trimmedStr = "  Hello World  ".trim(); // "Hello World"
        System.out.println("Строка после удаления пробелов: " + trimmedStr);

        // Примеры объединения строк
        String s1 = "Hello";
        String s2 = "World";

        // Использование оператора +
        String s3 = s1 + " " + s2; // "Hello World"
        System.out.println("Объединение строк с помощью +: " + s3);

        // Использование метода concat()
        String s4 = s1.concat(" ").concat(s2); // "Hello World"
        System.out.println("Объединение строк с помощью concat(): " + s4);

      // Использование метода replace()
      String s5a = "Hello friends";
      String s5b = s5a.replace("friends", "World"); // "Hello World"
      System.out.println("Замена символов с помощью replace(): " + s5b);
    }
}

```

</details>

## 5. Сравнение Строк в Java

### Сравнение строк с использованием `equals()` и `equalsIgnoreCase()`

#### Метод `equals()`

- `equals()` используется для сравнения двух строк на точное равенство.
- Этот метод сравнивает значения строк, а не их ссылки.

```java
  String str1="Java";
        String str2="Java";
        String str3="JAVA";

        boolean result1=str1.equals(str2); // true
        boolean result2=str1.equals(str3); // false
```

#### Метод `equalsIgnoreCase()`

- `equalsIgnoreCase()` аналогичен `equals()`, но он игнорирует регистр символов при сравнении.

  `boolean result3 = str1.equalsIgnoreCase(str3); // true`

### Отличие Оператора `==` от `equals()`

#### Оператор `==`

- Оператор `==` сравнивает ссылки на объекты, а не их содержимое.
- Если две переменные указывают на один и тот же объект в памяти, `==` вернет `true`.

```java
  String s1="Hello";
        String s2="Hello";
        String s3=new String("Hello");

        boolean isEqual=(s1==s2); // true, потому что s1 и s2 указывают на один объект в пуле строк
        boolean isNotEqual=(s1==s3); // false, s3 ссылается на другой объект
```

#### Важность использования `equals()` для сравнения строк

- Использование `equals()` является предпочтительным способом сравнения строк в Java, так как оно обеспечивает
  корректное сравнение содержимого строк.
- `==` может ввести в заблуждение, если сравниваются строки, созданные разными способами (например, одна через литерал,
  а другая через `new String()`), так как они могут иметь разные ссылки в памяти.

Знание различий между `equals()` и `==` и правильное их использование критически важно для корректного сравнения строк в
Java.

## Работа с Изменяемыми Строками: `StringBuilder` и `StringBuffer`

### Введение в `StringBuilder` и `StringBuffer`

`StringBuilder` и `StringBuffer` в Java используются для создания изменяемых строк. В отличие от неизменяемых
строк (`String`), объекты `StringBuilder` и `StringBuffer` могут быть изменены после создания.

#### `StringBuilder`

- `StringBuilder` представляет изменяемую последовательность символов.
- Эффективен для операций, требующих частого изменения содержимого строки, таких как добавление, удаление или замена
  символов.

#### `StringBuffer`

- `StringBuffer` похож на `StringBuilder`, но он синхронизирован (thread-safe).
- Подходит для использования в многопоточных приложениях.

### Отличия `StringBuilder` от `StringBuffer`

- **Производительность**: `StringBuilder` обычно быстрее `StringBuffer` из-за отсутствия синхронизации.
- **Многопоточность**: `StringBuffer` безопасен для использования в многопоточных средах, в то время как `StringBuilder`
  нет.

### Примеры использования `StringBuilder` для изменения строк

#### Создание `StringBuilder`

`StringBuilder sb = new StringBuilder("Hello");`

#### Добавление текста

`sb.append(" World"); // Добавляет " World" к StringBuilder`

#### Вставка текста

`sb.insert(5, " Java"); // Вставляет " Java" на позицию 5`

#### Удаление текста

`sb.delete(5, 10); // Удаляет текст с позиции 5 по 10`

#### Обратная последовательность

`sb.reverse(); // Меняет порядок символов на обратный`

#### Преобразование в String

`String result = sb.toString(); // Конвертирует StringBuilder в String`

`StringBuilder` особенно полезен, когда необходимо выполнить множество (более нескольких десятков) изменений в строке,
так как это уменьшает общее количество создаваемых объектов по сравнению со строками `String`.

#### Выбор между `StringBuilder` и `StringBuffer`

С точки зрения пользовательского интерфейса, все методы в этих двух классах одинковы и выполняют одинаковый функциоал.
Выбор между `StringBuilder` и `StringBuffer` зависит от конкретных требований вашего приложения. Если вам нужна скорость и
вы работаете в однопоточной среде, выбирайте `StringBuilder`. Если вам необходима потокобезопасность и вы работаете с
многопоточными приложениями, лучше использовать `StringBuffer`.


## Преобразование Данных в Строки и Обратно

### Преобразование Примитивов в Строки с Помощью `toString()`

- Метод `toString()` может быть использован для преобразования примитивных типов данных в строки.
- В Java для каждого примитивного типа существуют оберточные классы (например, `Integer` для `int`, `Double` для `double`), предоставляющие метод `toString()`.
```java
  int num = 100;
  String numStr = Integer.toString(num);

  double dbl = 10.5;
  String dblStr = Double.toString(dbl);
```

### Преобразование Строк в Примитивы

- Часто возникает необходимость преобразовать строку обратно в примитивный тип данных. Для этого можно использовать методы парсинга, предоставляемые оберточными классами.
```java
  String intStr = "123";
  int intValue = Integer.parseInt(intStr);

  String doubleStr = "10.5";
  double doubleValue = Double.parseDouble(doubleStr);
```
- Важно обрабатывать исключения, такие как `NumberFormatException`, когда строка не может быть правильно преобразована в число.

### Работа с `String.format()` для Форматированного Вывода

- `String.format()` позволяет создавать отформатированные строки, используя шаблоны и аргументы.
- Этот метод особенно полезен для создания строк с определенной структурой или форматом.
```java
  String name = "Ильяс";
  int age = 32;
  String greeting = String.format("Привет, %s! Тебе %d лет.", name, age);
```
- `%s` и `%d` в шаблоне строки являются плейсхолдерами для строкового и целочисленного значений соответственно.

Использование этих методов и техник преобразования данных позволяет гибко управлять представлением и обработкой строк в Java-приложениях.
Здесь приведены лишь основные примеры использования, еще больше информации вы можете найти на сайте Oracle 
[Formatter](https://docs.oracle.com/javase/8/docs/api/java/util/Formatter.html)



